
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Dashboard - Quản lý nhân viên</title>

<!-- Bootstrap Core CSS -->
<link
	href="/webjars/startbootstrap-sb-admin-2/1.0.2/css/bootstrap.min.css"
	rel="stylesheet" />

<!-- MetisMenu CSS -->
<link
	href="/webjars/startbootstrap-sb-admin-2/1.0.2/css/plugins/metisMenu/metisMenu.min.css"
	rel="stylesheet" />

<!-- Timeline CSS -->
<link
	href="/webjars/startbootstrap-sb-admin-2/1.0.2/css/plugins/timeline.css"
	rel="stylesheet" />

<!-- Custom CSS -->
<link href="/webjars/startbootstrap-sb-admin-2/1.0.2/css/sb-admin-2.css"
	rel="stylesheet" />

<!-- Morris Charts CSS -->
<link
	href="/webjars/startbootstrap-sb-admin-2/1.0.2/css/plugins/morris.css"
	rel="stylesheet" />

<!-- Custom Fonts -->
<link
	href="/webjars/startbootstrap-sb-admin-2/1.0.2/font-awesome/css/font-awesome.min.css"
	rel="stylesheet" type="text/css" />

<!-- jQuery -->
<script src="/webjars/startbootstrap-sb-admin-2/1.0.2/js/jquery.js"></script>

<!-- Bootstrap Core JavaScript -->
<script
	src="/webjars/startbootstrap-sb-admin-2/1.0.2/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/webjars/startbootstrap-sb-admin-2/1.0.2/js/sb-admin-2.js"></script>


<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script
	src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
<script
	src="https://cdn.datatables.net/1.10.22/js/dataTables.bootstrap4.min.js"></script>
<script
	src="https://cdn.datatables.net/responsive/2.2.6/js/dataTables.responsive.min.js"></script>
<script
	src="https://cdn.datatables.net/responsive/2.2.6/js/responsive.bootstrap4.min.js"></script>
</head>

<body>

	<div id="wrapper">

		<nav class="navbar navbar-default navbar-static-top" role="navigation"
			style="margin-bottom: 0">
			<a href="/dashboard/"><img src="/assets/img/favicon.png"
				style="width: 13%;"></a>

			<ul class="nav navbar-top-links navbar-right">

				<li class="dropdown"><a class="dropdown-toggle"
					data-toggle="dropdown" href="#"> <i class="fa fa-user fa-fw"></i>
						<i class="fa fa-caret-down"></i>[[${#request.userPrincipal.principal.username}]]
				</a>
					<ul class="dropdown-menu dropdown-user">
						<li><a href="/profile/"><i class="fa fa-user fa-fw"></i>
								Thông tin tài khoản</a></li>
						<li><a href="/changePass"><i class="fa fa-gear fa-fw"></i> Đổi mật
								khẩu</a></li>
						<li class="divider"></li>
						<li><a th:href="@{/logout}"><i
								class="fa fa-sign-out fa-fw"></i> Đăng xuất</a></li>
					</ul> <!-- /.dropdown-user --></li>


				<!-- /.dropdown -->
			</ul>
			<!-- /.navbar-top-links -->

			<div class="navbar-default sidebar" role="navigation">
				<div class="sidebar-nav navbar-collapse">
					<ul class="nav" id="side-menu">

						<li><a href="/dashboard/"><i
								class="fa fa-dashboard fa-fw"></i> Dashboard</a></li>
						<li><a href="/dashboard/staff/"><i class="fa fa-user"></i>
								Quản lý nhân viên</a></li>
						<li><a href="/dashboard/quanlylichkham/"><i
								class="fa fa-user"></i> Quản lý lịch làm việc</a></li>
						<li><a href="/dashboard/services/"><i class="fa fa-user"></i>
								Quản lý dịch vụ</a></li>
						<li><a href="/dashboard/customer/"><i class="fa fa-user"></i>
								Quản lý khách hàng</a></li>
						<li><a href="/dashboard/account/"><i class="fa fa-user"></i>
								Quản lý tài khoản</a></li>
						<li><a href="/dashboard/lichkham/"><i class="fa fa-user"></i>Tiếp
								nhận lịch khám</a></li>

					</ul>
				</div>
				<!-- /.sidebar-collapse -->
			</div>
			<!-- /.navbar-static-side -->
		</nav>

<div class="notify">
					<div th:if="${message}">
						<span id="snackbar"  style="color: white;font-size:16px;" th:text="${message}"></span>
					</div>
				</div>

    <div id="page-wrapper">

        <div class="container-fluid">

            <!-- Page Heading -->
            <h1 class="h3 mb-2 text-gray-800 mb-5">Lịch làm việc</h1>
            <!-- DataTales Example -->
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <div class="row">
                        <div class="col-lg-6">
                            <h6 class="m-0 font-weight-bold text-primary">Hiển thị chi tiết lịch khám bệnh</h6>                          
                             <a th:if=${dangKyLich} th:href="@{/dashboard/quanlylichkham/dangky}" class="btn btn-default">Đăng ký lịch</a>
                             <a th:if="${dangKyLich == false}" th:href="@{/dashboard/quanlylichkham/dangky}" class="btn btn-default" disabled>Đăng ký lịch</a>
                            <a th:href="@{/dashboard/staff/export}"
						class="btn btn-warning">Export Excel</a>

                        </div>
                        
                    </div>
                </div>
                <h2>[[${thongBao}]]</h2>
                <br>
                <div class="card-body">
                	<table id="example" class="table table-striped table-bordered"
							style="width: 100%" cellspacing="0">
							<thead>
								<th>STT</th>
								<th>Tên khách hàng</th>
								<th>Số điện thoại</th>
								<th>Tên dịch vụ</th>
								<th>Bác sĩ khám</th>
								<th>Ngày Đặt</th>
								<th>Giờ bắt đầu</th>
								
								<th>Trạng thái</th>
								<th style="width:120px;">Hành động</th>

							</thead>
							<tbody tbody class="text-justify" id="myTable">
								<th:block th:each="tiepNhanList,stt : ${tiepNhanList}"
									th:if="${tiepNhanList.active == 1}">
									<tr>
										<td th:text="${stt.count}"></td>
										<td th:text="${tiepNhanList.name}"></td>
										<td th:text="${tiepNhanList.sdt}"></td>
										<td th:text="${tiepNhanList.tendv}"></td>
										<td th:text="${tiepNhanList.tenbs}"></td>
										<td
											th:text="${#dates.format(tiepNhanList.ngayDat, 'dd-MM-yyyy')}"></td>
										<td th:text="${tiepNhanList.gioBatDau}"></td>
										
										<td th:if="${tiepNhanList.status == 3}">Hoành thành dịch vụ</td>
										<td th:if="${tiepNhanList.status == 2}">Tái khám</td>
										<td th:if="${tiepNhanList.status == 1}">Đã xác nhận</td>
										<td  >
											<div  class="dropdown">
												<button th:if="${tiepNhanList.status != 3}" class="btn btn-default dropdown-toggle"
													type="button" id="menu1" data-toggle="dropdown">
													Hành động <span class="caret"></span>
												</button>
												<ul class="dropdown-menu" role="menu"
													aria-labelledby="menu1">
													<li role="presentation"><a
													    role="menuitem"
														tabindex="-1"
														th:href="@{'/dashboard/quanlylichkham/xacnhan/'+${tiepNhanList.id_detail}}">Hoàn thành</a></li>
													<li role="presentation"><a role="menuitem"
														tabindex="-1"
														th:href="@{'/dashboard/quanlylichkham/taikham/'+${tiepNhanList.id_detail}}">Tái khám</a></li>
													
													<!-- -->
												</ul>
											</div>

											<div th:id="myModal+${tiepNhanList.id_detail}"
												class="modal fade">
												<div class="modal-dialog modal-confirm">
													<div class="modal-content">
														<div class="modal-header flex-column">

															<h4 class="modal-title w-100">Bạn có chắc chắn muốn
																xóa lịch làm việc này chứ ?</h4>
															<button type="button" class="close" data-dismiss="modal"
																aria-hidden="true">&times;</button>
														</div>
														<div class="modal-body">
															<p>Bạn có muốn lịch làm việc này chứ ?</p>
														</div>
														<div class="modal-footer justify-content-center">
															<a
																th:href="@{/dashboard/lichkham/huylich/{id}(id=${tiepNhanList.id_detail})}"
																type="button" class="btn btn-danger">Hủy lịch</a>
															<button type="button" class="btn btn-secondary"
																data-dismiss="modal">Không</button>
														</div>
													</div>
												</div>
											</div>

										</td>
									</tr>

								</th:block>
							</tbody>

						</table>
                    <div th:if="${hien}" class="table-responsive">
                    <h4>Lịch làm việc</h4>
                        <table  class="table table-bordered" cellspacing="0" >
                            <thead>
                            <tr  class="text-center">
              					<th style="width: 50px;">Ca</th>
                                <th style="width: 150px;">Giờ</th>
                                <th>Thứ 2</th>
                                <th>Thứ 3</th>
                                <th>Thứ 4</th>
                                <th>Thứ 5</th>
                                <th>Thứ 6</th>
                                <th>Thứ 7</th>
                            </tr>
                            </thead>
                            
                            <tbody class="text-justify" id="myTable">
                           
       
                            <tr  style="height:80px">
                            
    							<td>1</td>
                                <td>08:30 AM - 12:00AM</td>
                                <td  th:attr="style=${workWeek[0].shift1 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td  th:attr="style=${workWeek[1].shift1 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td  th:attr="style=${workWeek[2].shift1 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td  th:attr="style=${workWeek[3].shift1 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td  th:attr="style=${workWeek[4].shift1 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td  th:attr="style=${workWeek[5].shift1 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
						
                            </tr>
                            <tr style="height:80px">
    							<td>2</td>
                                <td>13:00 PM - 17:30PM</td>
                                <td th:attr="style=${workWeek[0].shift2 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td th:attr="style=${workWeek[1].shift2 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td th:attr="style=${workWeek[2].shift2 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td th:attr="style=${workWeek[3].shift2 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td th:attr="style=${workWeek[4].shift2 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td th:attr="style=${workWeek[5].shift2 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>

                            </tr>
                            <tr style="height:80px">
    							<td>3</td>
                                <td>18:00 PM - 19:30PM</td>
                                <td th:attr="style=${workWeek[0].shift3 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td th:attr="style=${workWeek[1].shift3 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td th:attr="style=${workWeek[2].shift3 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td th:attr="style=${workWeek[3].shift3 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td th:attr="style=${workWeek[4].shift3 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td th:attr="style=${workWeek[5].shift3 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>

                            </tr>
                         
                            </tbody>
                            
                        </table>
                        
                        <table th:if=${hien0}  class="table table-bordered" cellspacing="0" >
                            <thead>
                            <tr  class="text-center">
              					<th style="width: 50px;">Ca</th>
                                <th style="width: 150px;">Giờ</th>
                                <th>Thứ 2</th>
                                <th>Thứ 3</th>
                                <th>Thứ 4</th>
                                <th>Thứ 5</th>
                                <th>Thứ 6</th>
                                <th>Thứ 7</th>
                            </tr>
                            </thead>
                            
                            <tbody class="text-justify" id="myTable">
                           
       
                            <tr  style="height:80px">
                            
    							<td>1</td>
                                <td>08:30 AM - 12:00AM</td>
                                <td  th:attr="style=${workWeek0[0].shift1 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td  th:attr="style=${workWeek0[1].shift1 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td  th:attr="style=${workWeek0[2].shift1 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td  th:attr="style=${workWeek0[3].shift1 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td  th:attr="style=${workWeek0[4].shift1 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td  th:attr="style=${workWeek0[5].shift1 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
						
                            </tr>
                            <tr style="height:80px">
    							<td>2</td>
                                <td>13:00 PM - 17:30PM</td>
                                <td th:attr="style=${workWeek0[0].shift2 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td th:attr="style=${workWeek0[1].shift2 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td th:attr="style=${workWeek0[2].shift2 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td th:attr="style=${workWeek0[3].shift2 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td th:attr="style=${workWeek0[4].shift2 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td th:attr="style=${workWeek0[5].shift2 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>

                            </tr>
                            <tr style="height:80px">
    							<td>3</td>
                                <td>18:00 PM - 19:30PM</td>
                                <td th:attr="style=${workWeek0[0].shift3 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td th:attr="style=${workWeek0[1].shift3 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td th:attr="style=${workWeek0[2].shift3 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td th:attr="style=${workWeek0[3].shift3 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td th:attr="style=${workWeek0[4].shift3 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>
                                <td th:attr="style=${workWeek0[5].shift3 == 1} ? 'background-color: #66ff66': ' background-color:#d0e1e1'"></td>

                            </tr>
                         
                            </tbody>
                            
                        </table>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <!-- /#page-wrapper -->

</div>
<!-- /#wrapper -->

<style>

#snackbar {
  visibility: hidden;
  min-width: 250px;
  margin-left: -125px;
  background-color: #58a9e9;
  color: #fff;
  text-align: center;
  border-radius: 2px;
  padding: 16px;
  position: fixed;
  z-index: 1;
  left: 50%;
  top: 50px;
  font-size: 17px;
}

#snackbar.show {
  visibility: visible;
  -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;
  animation: fadein 0.5s, fadeout 0.5s 2.5s;
}

@-webkit-keyframes fadein {
  from {top: 0; opacity: 0;} 
  to {top: 50px; opacity: 1;}
}

@keyframes fadein {
  from {top: 0; opacity: 0;}
  to {top: 50px; opacity: 1;}
}

@-webkit-keyframes fadeout {
  from {top: 50px; opacity: 1;} 
  to {top: 0; opacity: 0;}
}

@keyframes fadeout {
  from {top: 50px; opacity: 1;}
  to {top: 0; opacity: 0;}
}
* { 
  word-wrap:break-word;
}

table { 
  table-layout:fixed;
  width:100%;
}
.table-responsive {
	overflow-x: hidden;
}

#example_paginate {
	float: right;
}

#example_filter {
	float: right;
}
</style>
<script type="text/javascript">
		$(document).ready(function() {
			$('#example').DataTable({
				"language" : {
					"lengthMenu" : "Hiển thị _MENU_ item mỗi trang",
					"zeroRecords" : "Không có dữ liệu",
					"info" : "Hiển thị _PAGE_ trong tổng _PAGES_",
					"infoEmpty" : "Không có dữ liệu",
					"paginate" : {
						"first" : "Đầu tiền",
						"last" : "Cuối",
						"next" : "Tiếp",
						"previous" : "Trước"
					},
					"search" : "Tìm kiếm:",
				},
			 "order": [ 5, 'desc' ],
			});
			 var x = document.getElementById("snackbar");
			  x.className = "show";
			  setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
		});
	</script>

</body>

</html>
